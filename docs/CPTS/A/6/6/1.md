Es casi seguro que nos encontraremos con servidores web durante nuestro tiempo aprendiendo y practicando activamente el pentesting. Gran parte de los servicios de software del mundo se están trasladando a plataformas basadas en la web, accesibles a través de la web mundial utilizando un navegador web y HTTP/S. Solo considera el sitio web en el que estamos ahora. Está completamente en el navegador, accesible desde cualquier parte del mundo utilizando cualquier dispositivo conectado a Internet. Los medios de entretenimiento modernos como `video games`, `music` y `video streaming` son accesibles a través de navegadores y aplicaciones. Esto significa que nos encontraremos apuntando a aplicaciones web cada vez más a medida que pasa el tiempo.

Además, durante las pruebas de penetración externas, a menudo encontramos que las redes perimetrales de los clientes están bien reforzadas. No exponen servicios vulnerables como SMB u otros elementos que solíamos encontrar con frecuencia. Esos elementos ahora los anticipamos principalmente durante una prueba de penetración interna. Durante nuestras pruebas de penetración externas, comúnmente "entramos" (obtenemos un punto de apoyo dentro de la red interna) a través de ataques a aplicaciones web (ataques de carga de archivos, SQL injection, RFI/LFI, command injection, etc.), password spraying (contra portales RDS, VPN, Citrix, OWA y otras aplicaciones que utilizan autenticación de Active Directory) e ingeniería social.

Las aplicaciones web son a menudo la mayoría de lo que vemos expuesto durante una evaluación de red externa y a menudo presentan una enorme superficie de ataque. Podemos encontrar formularios de carga de archivos disponibles públicamente que nos permiten cargar directamente una web shell en PHP, JSP o ASP.NET. Algunas funcionalidades durante pruebas autenticadas pueden estar presentes o, nuestro favorito personal, una funcionalidad de auto-registro donde podemos entrar y cargar una web shell (después de evitar los controles del lado del cliente) en el área de carga de la imagen de perfil de usuario. También podemos encontrarnos con aplicaciones como Tomcat, Axis2 o WebLogic, que permiten desplegar código JSP a través de un archivo WAR como parte de su funcionalidad. Incluso podemos encontrar un servicio FTP mal configurado que permite cargas de archivos directamente en la webroot del servidor. Hay muchas otras formas en que podemos encontrar para cargar una web shell que están fuera del alcance de este módulo. ¿Qué viene después una vez que hemos identificado una vulnerabilidad de carga no restringida o una mala configuración?

---

## What is a Web Shell?

Una `web shell` es una sesión shell basada en el navegador que podemos usar para interactuar con el sistema operativo subyacente de un servidor web. Nuevamente, para obtener ejecución de código remoto a través de web shell, primero debemos encontrar una vulnerabilidad en un sitio web o aplicación web que nos pueda dar capacidades de carga de archivos. La mayoría de las web shells se obtienen cargando un payload escrito en un lenguaje web en el servidor objetivo. El payload(s) que cargamos debe darnos capacidad de ejecución de código remoto dentro del navegador. Las secciones y desafíos siguientes se centrarán principalmente en la ejecución de comandos a través de nuestras web shells en el navegador. Aun así, es esencial saber que depender solo de la web shell para interactuar con el sistema puede ser inestable e incierto porque algunas aplicaciones web están configuradas para eliminar las cargas de archivos después de un cierto período de tiempo. Para lograr persistencia en un sistema, en muchos casos, esta es la forma inicial de obtener ejecución de código remoto a través de una aplicación web, que luego podemos usar para actualizar a una reverse shell más interactiva.

En las siguientes secciones, aprenderemos y experimentaremos con varias web shells que nos permiten interactuar con el sistema operativo subyacente de un servidor web a través del navegador web.